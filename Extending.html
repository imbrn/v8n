<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Extending | v8n</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="The ultimate JavaScript validation library">
    
    <link rel="preload" href="/v8n/assets/css/0.styles.01cbf5f7.css" as="style"><link rel="preload" href="/v8n/assets/js/app.4d8e7678.js" as="script"><link rel="preload" href="/v8n/assets/js/2.4381c0bb.js" as="script"><link rel="preload" href="/v8n/assets/js/7.a035af40.js" as="script"><link rel="prefetch" href="/v8n/assets/js/10.ad58c917.js"><link rel="prefetch" href="/v8n/assets/js/11.287ba68b.js"><link rel="prefetch" href="/v8n/assets/js/3.4134fc2d.js"><link rel="prefetch" href="/v8n/assets/js/4.cb7c0a0d.js"><link rel="prefetch" href="/v8n/assets/js/5.746b9636.js"><link rel="prefetch" href="/v8n/assets/js/6.af802eaf.js"><link rel="prefetch" href="/v8n/assets/js/8.b3854c0a.js"><link rel="prefetch" href="/v8n/assets/js/9.b21c11e8.js">
    <link rel="stylesheet" href="/v8n/assets/css/0.styles.01cbf5f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v8n/" class="home-link router-link-active"><!----> <span class="site-name">v8n</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v8n/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/v8n/api/" class="nav-link">
  API
</a></div> <a href="https://github.com/imbrn/v8n" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v8n/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/v8n/api/" class="nav-link">
  API
</a></div> <a href="https://github.com/imbrn/v8n" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="carbon-ads"></div> <ul class="sidebar-links"><li><a href="/v8n/" aria-current="page" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/#what-s-v8n" class="sidebar-link">What's v8n?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/#features" class="sidebar-link">Features</a></li></ul></li><li class="sidebar-sub-header"><a href="/v8n/#getting-started" class="sidebar-link">Getting started</a></li><li class="sidebar-sub-header"><a href="/v8n/#overview" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/#fluent-api" class="sidebar-link">Fluent API</a></li><li class="sidebar-sub-header"><a href="/v8n/#typescript-support" class="sidebar-link">TypeScript support</a></li><li class="sidebar-sub-header"><a href="/v8n/#custom-rules" class="sidebar-link">Custom rules</a></li><li class="sidebar-sub-header"><a href="/v8n/#validation-strategies" class="sidebar-link">Validation strategies</a></li></ul></li></ul></li><li><a href="/v8n/Installation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Installation.html#script-include" class="sidebar-link">&lt;script&gt; include</a></li><li class="sidebar-sub-header"><a href="/v8n/Installation.html#npm" class="sidebar-link">NPM</a></li><li class="sidebar-sub-header"><a href="/v8n/Installation.html#builds" class="sidebar-link">Builds</a></li></ul></li><li><a href="/v8n/Validation.html" class="sidebar-link">Building Validations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Validation.html#chaining-rules" class="sidebar-link">Chaining rules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Validation.html#optional-validations" class="sidebar-link">Optional Validations</a></li></ul></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#modifiers" class="sidebar-link">Modifiers</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#validation-strategies" class="sidebar-link">Validation strategies</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Validation.html#boolean-based-validation" class="sidebar-link">Boolean based validation</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#array-based-validation" class="sidebar-link">Array based validation</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#exception-based-validation" class="sidebar-link">Exception based validation</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#asynchronous-validation" class="sidebar-link">Asynchronous validation</a></li></ul></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#reusing-validations" class="sidebar-link">Reusing validations</a></li></ul></li><li><a href="/v8n/Extending.html" aria-current="page" class="active sidebar-link">Extending</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Extending.html#regular-rules" class="sidebar-link">Regular rules</a></li><li class="sidebar-sub-header"><a href="/v8n/Extending.html#asynchronous-rules" class="sidebar-link">Asynchronous rules</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="extending"><a href="#extending" aria-hidden="true" class="header-anchor">#</a> Extending</h1> <p>Even though v8n comes with more than 30 validation rules already baked right in,
you will often find that you need something else for your project. Of course
it's super easy to extend v8n to use your own rules in the same fluid way. Rules
are importantly just functions with a name that return either <code>true</code>, <code>false</code> or
in the case of asynchronous validation a <code>Promise</code> that resolves to a <code>boolean</code>.
Extending is always done using the <code>extend()</code> method on the v8n object. It
receives an object as it's only parameter that contains the name of the rule as
the key and the function as the value.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Custom rules will override built-in rules with the same name.</p></div> <h2 id="regular-rules"><a href="#regular-rules" aria-hidden="true" class="header-anchor">#</a> Regular rules</h2> <p>Regular rules are simple functions that ultimately return a <code>boolean</code>. You can
do however much you want within the function, including nesting more validation
chains from new v8n calls. Specifically your function needs to be passed to as
the value of an object given to <code>extend()</code>. You can have as many parameters on
your rule as you like, but the return value must be a function that returns the
<code>boolean</code> mentioned above.</p> <div class="language-js extra-class"><pre class="language-js"><code>v8n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  myCustomRule<span class="token punctuation">:</span> expected <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token operator">=&gt;</span> value <span class="token operator">===</span> expected<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">myCustomRule</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// False</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>extend()</code> method is not called on <code>v8n()</code> but instead is a property of
the <code>v8n</code> object. Make sure to ommit the braces here!</p></div> <p>If you really love arrow functions and single lines, you could make the above
rule even smaller.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">myCustomRule</span> <span class="token operator">=</span> expected <span class="token operator">=&gt;</span> value <span class="token operator">=&gt;</span> value <span class="token operator">===</span> expected<span class="token punctuation">;</span>
v8n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> myCustomRule <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Your function should return a function and not just the boolean. This is
important so that you can actually work with the value for validation. The value
will be available as the only argument of the returned function so that you can
work with it.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Your custom function does not accept the value as a parameter, it only receives
it's own configuration. The value is available from a function within the rule.</p></div> <p>If you omit the function return you will still be fine, but your validation
could not work with the value that is being validated. This might be useful if
you are validating that some external condition not dependent on the value is
met. Usually you'll want the value though.</p> <h2 id="asynchronous-rules"><a href="#asynchronous-rules" aria-hidden="true" class="header-anchor">#</a> Asynchronous rules</h2> <p>Asynchronous rules are very similar to regular rules. There are only subtle
differences in declaration and usage.</p> <ul><li>Can only be used with <code>asyncTest()</code> strategy</li> <li>Must return a <code>Promise</code> that resolves to <code>boolean</code></li></ul> <p>Essentially you defined these rules exactly the same as any regular rule. The
thing that these make possible is that you can return <code>Promise</code> instead of
actually having to get the value beforehand. This is particularly useful for
calls to a webserver for some sort of backend validation or database checks. The
<code>Promise</code> then needs to resolve to a <code>boolean</code> value and v8n will handle the
rest, including rejecting if anythingn happens or if it resolves to <code>false</code>. You
don't have to reject the <code>Promise</code> yourself.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">myAsyncCustomRule</span> <span class="token operator">=</span> expected <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// fetches data from an api, for example, and resolves with the result</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;some API call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>result <span class="token operator">==</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
v8n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> myAsyncCustomRule <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Most popular HTTP libraries will return Promises, so this will let you simply
pass them to return and be done with it. Everything will be handled by v8n
and the <code>testAsync()</code> strategy.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/1/2022, 2:18:16 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/v8n/Validation.html" class="prev">
        Building Validations
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v8n/assets/js/app.4d8e7678.js" defer></script><script src="/v8n/assets/js/2.4381c0bb.js" defer></script><script src="/v8n/assets/js/7.a035af40.js" defer></script>
  </body>
</html>
