<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Building Validations | v8n</title>
    <meta name="description" content="The ultimate JavaScript validation library">
    
    
    <link rel="preload" href="/v8n/assets/css/styles.5ff1724d.css" as="style"><link rel="preload" href="/v8n/assets/js/app.5ff1724d.js" as="script"><link rel="preload" href="/v8n/assets/js/5.926651cf.js" as="script"><link rel="prefetch" href="/v8n/assets/css/1.styles.2c24dcdf.css"><link rel="prefetch" href="/v8n/assets/js/1.2c24dcdf.js"><link rel="prefetch" href="/v8n/assets/js/2.90f9aadf.js"><link rel="prefetch" href="/v8n/assets/js/3.3f1cd06a.js"><link rel="prefetch" href="/v8n/assets/js/4.4d049a7d.js"><link rel="prefetch" href="/v8n/assets/js/6.59a6ba08.js">
    <link rel="stylesheet" href="/v8n/assets/css/styles.5ff1724d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/v8n/" class="home-link router-link-active"><!----><span class="site-name">
      v8n
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/v8n/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/v8n/api/" class="nav-link">API</a></div><a href="https://github.com/imbrn/v8n" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v8n/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/v8n/api/" class="nav-link">API</a></div><a href="https://github.com/imbrn/v8n" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/v8n/" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/#what-s-v8n" class="sidebar-link">What's v8n?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/#features" class="sidebar-link">Features</a></li></ul></li><li class="sidebar-sub-header"><a href="/v8n/#getting-started" class="sidebar-link">Getting started</a></li><li class="sidebar-sub-header"><a href="/v8n/#overview" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/#fluent-api" class="sidebar-link">Fluent API</a></li><li class="sidebar-sub-header"><a href="/v8n/#custom-rules" class="sidebar-link">Custom rules</a></li><li class="sidebar-sub-header"><a href="/v8n/#validation-strategies" class="sidebar-link">Validation strategies</a></li></ul></li></ul></li><li><a href="/v8n/Installation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Installation.html#script-include" class="sidebar-link">&lt;script&gt; include</a></li><li class="sidebar-sub-header"><a href="/v8n/Installation.html#npm" class="sidebar-link">NPM</a></li><li class="sidebar-sub-header"><a href="/v8n/Installation.html#other-builds" class="sidebar-link">Other builds</a></li></ul></li><li><a href="/v8n/Validation.html" class="active sidebar-link">Building Validations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Validation.html#chaining-rules" class="sidebar-link">Chaining rules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Validation.html#optional-validations" class="sidebar-link">Optional Validations</a></li></ul></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#modifiers" class="sidebar-link">Modifiers</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#validation-strategies" class="sidebar-link">Validation strategies</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Validation.html#boolean-based-validation" class="sidebar-link">Boolean based validation</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#array-based-validation" class="sidebar-link">Array based validation</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#exception-based-validation" class="sidebar-link">Exception based validation</a></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#asynchronous-validation" class="sidebar-link">Asynchronous validation</a></li></ul></li><li class="sidebar-sub-header"><a href="/v8n/Validation.html#reusing-validations" class="sidebar-link">Reusing validations</a></li></ul></li><li><a href="/v8n/Extending.html" class="sidebar-link">Extending</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v8n/Extending.html#regular-rules" class="sidebar-link">Regular rules</a></li><li class="sidebar-sub-header"><a href="/v8n/Extending.html#asynchronous-rules" class="sidebar-link">Asynchronous rules</a></li></ul></li></ul></div><div class="page"><div class="content"><h1 id="building-validations"><a href="#building-validations" aria-hidden="true" class="header-anchor">#</a> Building Validations</h1><p>Setting up validations is really easy with v8n. Everything starts from the base
function <code>v8n()</code>. After calling this function you can chain all the rules you
like to create simple or complex validations.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Chain after this!</span>
</code></pre></div><h2 id="chaining-rules"><a href="#chaining-rules" aria-hidden="true" class="header-anchor">#</a> Chaining rules</h2><p>In order to build the validation we use a paradigm called chaining. This
essentially means that you build each validation rule after one another. This
creates a fluent writing experience. You can chain any rules to create your
custom validations.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Bread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The validation strategy, this will be true</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>There are no sanity checks, combining conflicting rules is possible.</p></div><p>At the end of your rules you will chain a
<a href="#validation-strategies">validation strategy</a>. This will end the chain and give
you the result of the validation. There are multiple available, make sure to
find the right one for you.</p><p>There is no need to write one rule per line, it's just a nice convention to
follow for clean code. For simple validations you can simply inline your
validation. You can also use these in conditionals and loops directly.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// If 2 is a number, do something!</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It's important to keep types in mind when validating. A string that consists of
just a number is not a number in the JavaScript sense. If you pass <code>'12'</code> to
the <code>number()</code> rule you'll get a negative result since <code>'12'</code> is a string.
v8n makes no assumptions about your types, so you need be explicit here and
convert the string manually beforehand.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// False because it's a string</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// True because Number turns '12' into 12</span>
</code></pre></div><p>Some rules also have parameters to control how they validate your value. These
are passed right in the chain. Notice that the stuff you pass to rules is not
validated, it is simply configuration for the rule.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">greaterThan</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// False, 1 is not at least 2</span>
</code></pre></div><p>For all the rules you can chain take a look at the
<a href="/v8n/api/#built-in-rules">full list</a>.</p><h3 id="optional-validations"><a href="#optional-validations" aria-hidden="true" class="header-anchor">#</a> Optional Validations</h3><p>If you have an optional value of some sort you might want to verify that it
passes some sort of validation only if it's defined. You could wrap the whole
validation in an <code>if</code> clause, but really there's a much better way. <code>v8n</code>
provides optional validation out of the box. This means you can just write your
rule-chain as you like and wrap it in an <code>optional()</code> validation rule.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> specialString <span class="token operator">=</span> <span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span>specialString<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;I like apples&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span>specialString<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;I like oranges&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span>specialString<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>undefined<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="modifiers"><a href="#modifiers" aria-hidden="true" class="header-anchor">#</a> Modifiers</h2><p>Sometimes you might want the inverse of a rule somewhere in your validation. For
example you might want to check that something isn't <code>null</code> when it can be any
other type. This is where modifiers come in. Modifiers are similar to rules,
they are also chained but instead of validating anything they will augment the
following rule.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token keyword">null</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// True, 2 isn't null</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>every<span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// False, hello isn't a number</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>some<span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// True, there is at least one number</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Modifiers can be combined on a rule. Simply chain them!</p></div><p>Notice how modifiers don't have braces <code>()</code>, this distinguishes them from
regular rules. There are three modifiers provided which you can use. Two of them
cater to arrays and one is more general purpose. Take a peek at all the
<a href="/v8n/api/#built-in-modifiers">built-in modifiers</a> for a little more info.</p><h2 id="validation-strategies"><a href="#validation-strategies" aria-hidden="true" class="header-anchor">#</a> Validation strategies</h2><p>Most validation will only return <code>true</code> or <code>false</code>. While v8n offers this, it
also gives you the ability to validate with different output formats. There are
currently 4 validation strategies for use and all of them are slightly different
from one another.</p><p>The validation strategy is chosen with the method at the end of your validation
chain. This method also receives the value you want to validate as it's only
argument. So keep in mind that whatever you actually want to validate is written
at the end of the chain, not anywhere within the rules or at the beginning.</p><h3 id="boolean-based-validation"><a href="#boolean-based-validation" aria-hidden="true" class="header-anchor">#</a> Boolean based validation</h3><p>Of course when validating many people will want to know if the given value
passes or not. This is regular <code>boolean</code> validation and v8n performs this if
you use the <code>test()</code> method. Quite simply this will return true if all the rules
pass and false if any of them fails.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Melon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// True</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// False, this is an object</span>
</code></pre></div><p>This strategy is most useful for conditionals since you can pass its result
directly into an <code>if</code> statement or similar. For more details about <code>test()</code>
and for additional examples take a look at it's <a href="/v8n/api/#test">API documentation</a>.</p><h3 id="array-based-validation"><a href="#array-based-validation" aria-hidden="true" class="header-anchor">#</a> Array based validation</h3><p>If you really need to know what was wrong with the value you passed to v8n,
simply getting <code>true</code> or <code>false</code> won't do you any good. This is where
array-based comes in. If you use <code>testAll()</code> you will always receive an array in
return. The array will be empty if no rules failed, but it will contain
ValidationError objects indicating each fail if they occur. This also means that
this strategy does not stop when any rule fails like the boolean-based version
does, instead it will always run all the rules.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token string">&quot;H&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">testAll</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Returns [] since every rule passes</span>

<span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token string">&quot;H&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">testAll</span><span class="token punctuation">(</span><span class="token string">&quot;Hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Returns [ValidationError{rule: {name: &quot;last&quot;...}, ...}]</span>
</code></pre></div><p>This is useful for providing detailed error messages but can also be used for
any number of other purposes. For some more in-depth examples head over
<a href="/v8n/api/#testall">to the documentation for <code>testAll()</code></a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The array will contain <a href="/v8n/api/#validationexception"><code>ValidationError</code> objects</a>
that you can work with.</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Keep in mind that this validation strategy will work exactly opposite if used
in conditionals compared to <code>test()</code>. This is because JavaScript will consider
an empty array to be a falsy value, so no errors would actually result in the
conditional passing here. Make sure to keep this in mind when checking whether
the validation passed here.</p></div><h3 id="exception-based-validation"><a href="#exception-based-validation" aria-hidden="true" class="header-anchor">#</a> Exception based validation</h3><p>In some cases you might not want to explicity check if validation passed in a
process. If your entire setup is based on a <code>try-catch</code> you might run all of
your code and catch any errors with a single catch to simplify your code. v8n
offers this type of validation too. When you use <code>check()</code> an exception will
be thrown if any rule fails. If all rules pass there just won't be any return
value at all.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;Lion&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will throw an exception since &quot;Lion&quot; is not a boolean</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Handle exception in some way</span>
  exception<span class="token punctuation">.</span>rule<span class="token punctuation">;</span> <span class="token comment">// Rule object of the first failed rule</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The resulting <a href="/v8n/api/#validationexception"><code>ValidationError</code></a> will also contain
information about the rule that failed so that you may display errors or
similar. You can find out more in the <a href="/v8n/api/#check">documentation for
<code>check()</code></a>.</p><h3 id="asynchronous-validation"><a href="#asynchronous-validation" aria-hidden="true" class="header-anchor">#</a> Asynchronous validation</h3><p>A very interesting use-case for validation might be an availability check for
a username or an email. Since your frontend can't know if a user is in the
database, you would need to query the server for this. Requesting something from
the server takes time and any library you might use to achieve it will perform
the request in an asynchronous way. All the strategies above don't support this
type of rule though, since they will return a result before the server has a
chance to respond. This is where we need <code>testAsync()</code> to run validations
asynchronously and await all the returns. You will ultimately receive a
<code>Promise</code> back which you can react to. It resolves to the value your validated
and would reject to a <code>ValidationError</code>.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// You can use regular rules too</span>
  <span class="token punctuation">.</span><span class="token function">checkUsernameAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// This asks something from a server</span>
  <span class="token punctuation">.</span><span class="token function">testAsync</span><span class="token punctuation">(</span><span class="token string">&quot;myUsername&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Promise return</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>validatedValue <span class="token operator">=&gt;</span> validatedValue<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>exception <span class="token operator">=&gt;</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>There are no built-in asynchronous rules. If you want to use this feature, you
can check out the guide on <a href="/v8n/Extending.html">Extending</a> and specifically on the
creation of <a href="/v8n/Extending.html#asynchronous-rules">asynchronous rules</a>.</p></div><p>Make sure to take a look the <a href="/v8n/api/#testasync">documentation for <code>testAsync()</code></a> to
get a good grasp of the return values it will yield.</p><h2 id="reusing-validations"><a href="#reusing-validations" aria-hidden="true" class="header-anchor">#</a> Reusing validations</h2><p>The flexibility of chaining adds a very nice additional feature. If you have
multiple validations that share common rules you can reuse them across your file
or even export them for use throughout the whole project. This is particulary
useful for complex validations. This also allows you to validate different
values with the same set of rules.</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token function">v8n</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token keyword">null</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">greaterThan</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

val<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// True</span>
val<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// False</span>
val<span class="token punctuation">.</span><span class="token function">lessThan</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// False</span>
</code></pre></div><p>You can of course perform different validation strategies on the same set of
rules. The rule-chain is completely decoupled from anything that comes after it,
so you can do as much as you like with it after creation.</p></div><div class="page-edit"><!----><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">5/18/2019, 9:44:44 PM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/v8n/Installation.html" class="prev">
          Installation
        </a></span><span class="next"><a href="/v8n/Extending.html">
          Extending
        </a> →
      </span></p></div></div></div></div>
    <script src="/v8n/assets/js/app.5ff1724d.js" defer></script><script src="/v8n/assets/js/5.926651cf.js" defer></script>
  </body>
</html>
