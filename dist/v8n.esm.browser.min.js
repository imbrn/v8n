class e{constructor(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r}_test(e){let t=this.fn;try{n(this.modifiers.slice(),t)(e)}catch(e){t=()=>!1}try{return n(this.modifiers.slice(),t)(e)}catch(e){return!1}}_check(e){try{n(this.modifiers.slice(),this.fn)(e)}catch(e){if(n(this.modifiers.slice(),(e=>e))(!1))return}if(!n(this.modifiers.slice(),this.fn)(e))throw null}_testAsync(e){return new Promise(((t,n)=>{r(this.modifiers.slice(),this.fn)(e).then((r=>{r?t(e):n(null)})).catch((e=>n(e)))}))}}function t(e,t="simple"){return"object"==typeof e?e[t]:e}function n(e,r){if(e.length){const t=e.shift(),s=n(e,r);return t.perform(s)}return t(r)}function r(e,n){if(e.length){const t=e.shift(),s=r(e,n);return t.performAsync(s)}return e=>Promise.resolve(t(n,"async")(e))}class s{constructor(e,t,n){this.name=e,this.perform=t,this.performAsync=n}}class i extends Error{constructor(e,t,n,r,...s){super(s),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.rule=e,this.value=t,this.cause=n,this.target=r}}class c{constructor(e=[],t=[]){this.chain=e,this.nextRuleModifiers=t}_applyRule(t,n){return(...r)=>(this.chain.push(new e(n,t.apply(this,r),r,this.nextRuleModifiers)),this.nextRuleModifiers=[],this)}_applyModifier(e,t){return this.nextRuleModifiers.push(new s(t,e.simple,e.async)),this}_clone(){return new c(this.chain.slice(),this.nextRuleModifiers.slice())}test(e){return this.chain.every((t=>t._test(e)))}testAll(e){const t=[];return this.chain.forEach((n=>{try{n._check(e)}catch(r){t.push(new i(n,e,r))}})),t}check(e){this.chain.forEach((t=>{try{t._check(e)}catch(n){throw new i(t,e,n)}}))}testAsync(e){return new Promise(((t,n)=>{o(e,this.chain.slice(),t,n)}))}}function o(e,t,n,r){if(t.length){const s=t.shift();s._testAsync(e).then((()=>{o(e,t,n,r)}),(t=>{r(new i(s,e,t))}))}else n(e)}function a(){return void 0!==typeof Proxy?l(new c):u(new c)}let h={};function l(e){return new Proxy(e,{get(t,n){if(n in t)return t[n];const r=l(e._clone());return n in f?r._applyModifier(f[n],n):n in h?r._applyRule(h[n],n):n in y?r._applyRule(y[n],n):void 0}})}function u(e){const t=(e,t)=>(Object.keys(e).forEach((n=>{t[n]=(...r)=>u(t._clone())._applyRule(e[n],n)(...r)})),t),n=t(y,e),r=t(h,n);return Object.keys(f).forEach((e=>{Object.defineProperty(r,e,{get:()=>u(r._clone())._applyModifier(f[e],e)})})),r}a.extend=function(e){Object.assign(h,e)},a.clearCustomRules=function(){h={}};const f={not:{simple:e=>t=>!e(t),async:e=>t=>Promise.resolve(e(t)).then((e=>!e)).catch((()=>!0))},some:{simple:e=>t=>p(t).some((t=>{try{return e(t)}catch(e){return!1}})),async:e=>t=>Promise.all(p(t).map((t=>{try{return e(t).catch((()=>!1))}catch(e){return!1}}))).then((e=>e.some(Boolean)))},every:{simple:e=>t=>!1!==t&&p(t).every(e),async:e=>t=>Promise.all(p(t).map(e)).then((e=>e.every(Boolean)))}};function p(e){return"string"==typeof e?e.split(""):e}const y={equal:e=>t=>t==e,exact:e=>t=>t===e,number:(e=!0)=>t=>"number"==typeof t&&(e||isFinite(t)),integer:()=>e=>(Number.isInteger||g)(e),numeric:()=>e=>!isNaN(parseFloat(e))&&isFinite(e),string:()=>m("string"),boolean:()=>m("boolean"),undefined:()=>m("undefined"),null:()=>m("null"),array:()=>m("array"),object:()=>m("object"),instanceOf:e=>t=>t instanceof e,pattern:e=>t=>e.test(t),lowercase:()=>e=>/^([a-z]+\s*)+$/.test(e),uppercase:()=>e=>/^([A-Z]+\s*)+$/.test(e),vowel:()=>e=>/^[aeiou]+$/i.test(e),consonant:()=>e=>/^(?=[^aeiou])([a-z]+)$/i.test(e),first:e=>t=>t[0]==e,last:e=>t=>t[t.length-1]==e,empty:()=>e=>0===e.length,length:(e,t)=>n=>n.length>=e&&n.length<=(t||e),minLength:e=>t=>t.length>=e,maxLength:e=>t=>t.length<=e,negative:()=>e=>e<0,positive:()=>e=>e>=0,between:(e,t)=>n=>n>=e&&n<=t,range:(e,t)=>n=>n>=e&&n<=t,lessThan:e=>t=>t<e,lessThanOrEqual:e=>t=>t<=e,greaterThan:e=>t=>t>e,greaterThanOrEqual:e=>t=>t>=e,even:()=>e=>e%2==0,odd:()=>e=>e%2!=0,includes:e=>t=>~t.indexOf(e),schema:e=>function(e){return{simple:t=>{const n=[];if(Object.keys(e).forEach((r=>{const s=e[r];try{s.check((t||{})[r])}catch(e){e.target=r,n.push(e)}})),n.length>0)throw n;return!0},async:t=>{const n=[],r=Object.keys(e).map((r=>e[r].testAsync((t||{})[r]).catch((e=>{e.target=r,n.push(e)}))));return Promise.all(r).then((()=>{if(n.length>0)throw n;return!0}))}}}(e),passesAnyOf:(...e)=>t=>e.some((e=>e.test(t))),optional:(e,t=!1)=>n=>(t&&"string"==typeof n&&""===n.trim()||null!=n&&e.check(n),!0)};function m(e){return t=>Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}function g(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}export default a;
//# sourceMappingURL=v8n.esm.browser.min.js.map
